import json 
from rapidfuzz import process  
data_format = {'STM32F407VGTx': {'LQFP100': {'PE2': {'1': {'I/O': [{'@Name': 'ETH_TXD3'}, {'@Name': 'FSMC_A23'}, {'@Name': 'SYS_TRACECLK'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE3': {'2': {'I/O': [{'@Name': 'FSMC_A19'}, {'@Name': 'SYS_TRACED0'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE4': {'3': {'I/O': [{'@Name': 'DCMI_D4'}, {'@Name': 'FSMC_A20'}, {'@Name': 'SYS_TRACED1'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE5': {'4': {'I/O': [{'@Name': 'DCMI_D6'}, {'@Name': 'FSMC_A21'}, {'@Name': 'SYS_TRACED2'}, {'@Name': 'TIM9_CH1'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE6': {'5': {'I/O': [{'@Name': 'DCMI_D7'}, {'@Name': 'FSMC_A22'}, {'@Name': 'SYS_TRACED3'}, {'@Name': 'TIM9_CH2'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'VBAT': {'6': {'Power': {}}}, 'PC13-ANTI_TAMP': {'7': {'I/O': [{'@Name': 'RTC_AF1'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC14-OSC32_IN': {'8': {'I/O': [{'@Name': 'RCC_OSC32_IN'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC15-OSC32_OUT': {'9': {'I/O': [{'@Name': 'ADC1_EXTI15'}, {'@Name': 'ADC2_EXTI15'}, {'@Name': 'ADC3_EXTI15'}, {'@Name': 'RCC_OSC32_OUT'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'VSS': {'99': {'Power': {}}}, 'VDD': {'100': {'Power': {}}}, 'PH0-OSC_IN': {'12': {'I/O': [{'@Name': 'RCC_OSC_IN'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PH1-OSC_OUT': {'13': {'I/O': [{'@Name': 'RCC_OSC_OUT'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'NRST': {'14': {'Reset': {}}}, 'PC0': {'15': {'I/O': [{'@Name': 'ADC1_IN10'}, {'@Name': 'ADC2_IN10'}, {'@Name': 'ADC3_IN10'}, {'@Name': 'USB_OTG_HS_ULPI_STP'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC1': {'16': {'I/O': [{'@Name': 'ADC1_IN11'}, {'@Name': 'ADC2_IN11'}, {'@Name': 'ADC3_IN11'}, {'@Name': 'ETH_MDC'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC2': {'17': {'I/O': [{'@Name': 'ADC1_IN12'}, {'@Name': 'ADC2_IN12'}, {'@Name': 'ADC3_IN12'}, {'@Name': 'ETH_TXD2'}, {'@Name': 'I2S2_ext_SD'}, {'@Name': 'SPI2_MISO'}, {'@Name': 'USB_OTG_HS_ULPI_DIR'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC3': {'18': {'I/O': [{'@Name': 'ADC1_IN13'}, {'@Name': 'ADC2_IN13'}, {'@Name': 'ADC3_IN13'}, {'@Name': 'ETH_TX_CLK'}, {'@Name': 'I2S2_SD'}, {'@Name': 'SPI2_MOSI'}, {'@Name': 'USB_OTG_HS_ULPI_NXT'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'VSSA': {'20': {'Power': {}}}, 'VREF+': {'21': {'Power': {}}}, 'VDDA': {'22': {'Power': {}}}, 'PA0-WKUP': {'23': {'I/O': [{'@Name': 'ADC1_IN0'}, {'@Name': 'ADC2_IN0'}, {'@Name': 'ADC3_IN0'}, {'@Name': 'ETH_CRS'}, {'@Name': 'SYS_WKUP'}, {'@Name': 'TIM2_CH1'}, {'@Name': 'TIM2_ETR'}, {'@Name': 'TIM5_CH1'}, {'@Name': 'TIM8_ETR'}, {'@Name': 'UART4_TX'}, {'@Name': 'USART2_CTS'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA1': {'24': {'I/O': [{'@Name': 'ADC1_IN1'}, {'@Name': 'ADC2_IN1'}, {'@Name': 'ADC3_IN1'}, {'@Name': 'ETH_REF_CLK'}, {'@Name': 'ETH_RX_CLK'}, {'@Name': 'TIM2_CH2'}, {'@Name': 'TIM5_CH2'}, {'@Name': 'UART4_RX'}, {'@Name': 'USART2_RTS'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA2': {'25': {'I/O': [{'@Name': 'ADC1_IN2'}, {'@Name': 'ADC2_IN2'}, {'@Name': 'ADC3_IN2'}, {'@Name': 'ETH_MDIO'}, {'@Name': 'TIM2_CH3'}, {'@Name': 'TIM5_CH3'}, {'@Name': 'TIM9_CH1'}, {'@Name': 'USART2_TX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA3': {'26': {'I/O': [{'@Name': 'ADC1_IN3'}, {'@Name': 'ADC2_IN3'}, {'@Name': 'ADC3_IN3'}, {'@Name': 'ETH_COL'}, {'@Name': 'TIM2_CH4'}, {'@Name': 'TIM5_CH4'}, {'@Name': 'TIM9_CH2'}, {'@Name': 'USART2_RX'}, {'@Name': 'USB_OTG_HS_ULPI_D0'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA4': {'29': {'I/O': [{'@Name': 'ADC1_IN4'}, {'@Name': 'ADC2_IN4'}, {'@Name': 'DAC_OUT1'}, {'@Name': 'DCMI_HSYNC'}, {'@Name': 'I2S3_WS'}, {'@Name': 'SPI1_NSS'}, {'@Name': 'SPI3_NSS'}, {'@Name': 'USART2_CK'}, {'@Name': 'USB_OTG_HS_SOF'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA5': {'30': {'I/O': [{'@Name': 'ADC1_IN5'}, {'@Name': 'ADC2_IN5'}, {'@Name': 'DAC_OUT2'}, {'@Name': 'SPI1_SCK'}, {'@Name': 'TIM2_CH1'}, {'@Name': 'TIM2_ETR'}, {'@Name': 'TIM8_CH1N'}, {'@Name': 'USB_OTG_HS_ULPI_CK'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA6': {'31': {'I/O': [{'@Name': 'ADC1_IN6'}, {'@Name': 'ADC2_IN6'}, {'@Name': 'DCMI_PIXCLK'}, {'@Name': 'SPI1_MISO'}, {'@Name': 'TIM13_CH1'}, {'@Name': 'TIM1_BKIN'}, {'@Name': 'TIM3_CH1'}, {'@Name': 'TIM8_BKIN'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA7': {'32': {'I/O': [{'@Name': 'ADC1_IN7'}, {'@Name': 'ADC2_IN7'}, {'@Name': 'ETH_CRS_DV'}, {'@Name': 'ETH_RX_DV'}, {'@Name': 'SPI1_MOSI'}, {'@Name': 'TIM14_CH1'}, {'@Name': 'TIM1_CH1N'}, {'@Name': 'TIM3_CH2'}, {'@Name': 'TIM8_CH1N'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC4': {'33': {'I/O': [{'@Name': 'ADC1_IN14'}, {'@Name': 'ADC2_IN14'}, {'@Name': 'ETH_RXD0'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC5': {'34': {'I/O': [{'@Name': 'ADC1_IN15'}, {'@Name': 'ADC2_IN15'}, {'@Name': 'ETH_RXD1'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB0': {'35': {'I/O': [{'@Name': 'ADC1_IN8'}, {'@Name': 'ADC2_IN8'}, {'@Name': 'ETH_RXD2'}, {'@Name': 'TIM1_CH2N'}, {'@Name': 'TIM3_CH3'}, {'@Name': 'TIM8_CH2N'}, {'@Name': 'USB_OTG_HS_ULPI_D1'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB1': {'36': {'I/O': [{'@Name': 'ADC1_IN9'}, {'@Name': 'ADC2_IN9'}, {'@Name': 'ETH_RXD3'}, {'@Name': 'TIM1_CH3N'}, {'@Name': 'TIM3_CH4'}, {'@Name': 'TIM8_CH3N'}, {'@Name': 'USB_OTG_HS_ULPI_D2'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB2': {'37': {'I/O': {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}}}, 'PE7': {'38': {'I/O': [{'@Name': 'FSMC_D4'}, {'@Name': 'FSMC_DA4'}, {'@Name': 'TIM1_ETR'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE8': {'39': {'I/O': [{'@Name': 'FSMC_D5'}, {'@Name': 'FSMC_DA5'}, {'@Name': 'TIM1_CH1N'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE9': {'40': {'I/O': [{'@Name': 'DAC_EXTI9'}, {'@Name': 'FSMC_D6'}, {'@Name': 'FSMC_DA6'}, {'@Name': 'TIM1_CH1'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE10': {'41': {'I/O': [{'@Name': 'FSMC_D7'}, {'@Name': 'FSMC_DA7'}, {'@Name': 'TIM1_CH2N'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE11': {'42': {'I/O': [{'@Name': 'ADC1_EXTI11'}, {'@Name': 'ADC2_EXTI11'}, {'@Name': 'ADC3_EXTI11'}, {'@Name': 'FSMC_D8'}, {'@Name': 'FSMC_DA8'}, {'@Name': 'TIM1_CH2'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE12': {'43': {'I/O': [{'@Name': 'FSMC_D9'}, {'@Name': 'FSMC_DA9'}, {'@Name': 'TIM1_CH3N'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE13': {'44': {'I/O': [{'@Name': 'FSMC_D10'}, {'@Name': 'FSMC_DA10'}, {'@Name': 'TIM1_CH3'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE14': {'45': {'I/O': [{'@Name': 'FSMC_D11'}, {'@Name': 'FSMC_DA11'}, {'@Name': 'TIM1_CH4'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE15': {'46': {'I/O': [{'@Name': 'ADC1_EXTI15'}, {'@Name': 'ADC2_EXTI15'}, {'@Name': 'ADC3_EXTI15'}, {'@Name': 'FSMC_D12'}, {'@Name': 'FSMC_DA12'}, {'@Name': 'TIM1_BKIN'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB10': {'47': {'I/O': [{'@Name': 'ETH_RX_ER'}, {'@Name': 'I2C2_SCL'}, {'@Name': 'I2S2_CK'}, {'@Name': 'SPI2_SCK'}, {'@Name': 'TIM2_CH3'}, {'@Name': 'USART3_TX'}, {'@Name': 'USB_OTG_HS_ULPI_D3'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB11': {'48': {'I/O': [{'@Name': 'ADC1_EXTI11'}, {'@Name': 'ADC2_EXTI11'}, {'@Name': 'ADC3_EXTI11'}, {'@Name': 'ETH_TX_EN'}, {'@Name': 'I2C2_SDA'}, {'@Name': 'TIM2_CH4'}, {'@Name': 'USART3_RX'}, {'@Name': 'USB_OTG_HS_ULPI_D4'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'VCAP_1': {'49': {'Power': {}}}, 'PB12': {'51': {'I/O': [{'@Name': 'CAN2_RX'}, {'@Name': 'ETH_TXD0'}, {'@Name': 'I2C2_SMBA'}, {'@Name': 'I2S2_WS'}, {'@Name': 'SPI2_NSS'}, {'@Name': 'TIM1_BKIN'}, {'@Name': 'USART3_CK'}, {'@Name': 'USB_OTG_HS_ID'}, {'@Name': 'USB_OTG_HS_ULPI_D5'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB13': {'52': {'I/O': [{'@Name': 'CAN2_TX'}, {'@Name': 'ETH_TXD1'}, {'@Name': 'I2S2_CK'}, {'@Name': 'SPI2_SCK'}, {'@Name': 'TIM1_CH1N'}, {'@Name': 'USART3_CTS'}, {'@Name': 'USB_OTG_HS_ULPI_D6'}, {'@Name': 'USB_OTG_HS_VBUS'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB14': {'53': {'I/O': [{'@Name': 'I2S2_ext_SD'}, {'@Name': 'SPI2_MISO'}, {'@Name': 'TIM12_CH1'}, {'@Name': 'TIM1_CH2N'}, {'@Name': 'TIM8_CH2N'}, {'@Name': 'USART3_RTS'}, {'@Name': 'USB_OTG_HS_DM'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB15': {'54': {'I/O': [{'@Name': 'ADC1_EXTI15'}, {'@Name': 'ADC2_EXTI15'}, {'@Name': 'ADC3_EXTI15'}, {'@Name': 'I2S2_SD'}, {'@Name': 'RTC_REFIN'}, {'@Name': 'SPI2_MOSI'}, {'@Name': 'TIM12_CH2'}, {'@Name': 'TIM1_CH3N'}, {'@Name': 'TIM8_CH3N'}, {'@Name': 'USB_OTG_HS_DP'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD8': {'55': {'I/O': [{'@Name': 'FSMC_D13'}, {'@Name': 'FSMC_DA13'}, {'@Name': 'USART3_TX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD9': {'56': {'I/O': [{'@Name': 'DAC_EXTI9'}, {'@Name': 'FSMC_D14'}, {'@Name': 'FSMC_DA14'}, {'@Name': 'USART3_RX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD10': {'57': {'I/O': [{'@Name': 'FSMC_D15'}, {'@Name': 'FSMC_DA15'}, {'@Name': 'USART3_CK'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD11': {'58': {'I/O': [{'@Name': 'ADC1_EXTI11'}, {'@Name': 'ADC2_EXTI11'}, {'@Name': 'ADC3_EXTI11'}, {'@Name': 'FSMC_A16'}, {'@Name': 'FSMC_CLE'}, {'@Name': 'USART3_CTS'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD12': {'59': {'I/O': [{'@Name': 'FSMC_A17'}, {'@Name': 'FSMC_ALE'}, {'@Name': 'TIM4_CH1'}, {'@Name': 'USART3_RTS'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD13': {'60': {'I/O': [{'@Name': 'FSMC_A18'}, {'@Name': 'TIM4_CH2'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD14': {'61': {'I/O': [{'@Name': 'FSMC_D0'}, {'@Name': 'FSMC_DA0'}, {'@Name': 'TIM4_CH3'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD15': {'62': {'I/O': [{'@Name': 'ADC1_EXTI15'}, {'@Name': 'ADC2_EXTI15'}, {'@Name': 'ADC3_EXTI15'}, {'@Name': 'FSMC_D1'}, {'@Name': 'FSMC_DA1'}, {'@Name': 'TIM4_CH4'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC6': {'63': {'I/O': [{'@Name': 'DCMI_D0'}, {'@Name': 'I2S2_MCK'}, {'@Name': 'SDIO_D6'}, {'@Name': 'TIM3_CH1'}, {'@Name': 'TIM8_CH1'}, {'@Name': 'USART6_TX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC7': {'64': {'I/O': [{'@Name': 'DCMI_D1'}, {'@Name': 'I2S3_MCK'}, {'@Name': 'SDIO_D7'}, {'@Name': 'TIM3_CH2'}, {'@Name': 'TIM8_CH2'}, {'@Name': 'USART6_RX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC8': {'65': {'I/O': [{'@Name': 'DCMI_D2'}, {'@Name': 'SDIO_D0'}, {'@Name': 'TIM3_CH3'}, {'@Name': 'TIM8_CH3'}, {'@Name': 'USART6_CK'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC9': {'66': {'I/O': [{'@Name': 'DAC_EXTI9'}, {'@Name': 'DCMI_D3'}, {'@Name': 'I2C3_SDA'}, {'@Name': 'I2S_CKIN'}, {'@Name': 'RCC_MCO_2'}, {'@Name': 'SDIO_D1'}, {'@Name': 'TIM3_CH4'}, {'@Name': 'TIM8_CH4'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA8': {'67': {'I/O': [{'@Name': 'I2C3_SCL'}, {'@Name': 'RCC_MCO_1'}, {'@Name': 'TIM1_CH1'}, {'@Name': 'USART1_CK'}, {'@Name': 'USB_OTG_FS_SOF'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA9': {'68': {'I/O': [{'@Name': 'DAC_EXTI9'}, {'@Name': 'DCMI_D0'}, {'@Name': 'I2C3_SMBA'}, {'@Name': 'TIM1_CH2'}, {'@Name': 'USART1_TX'}, {'@Name': 'USB_OTG_FS_VBUS'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA10': {'69': {'I/O': [{'@Name': 'DCMI_D1'}, {'@Name': 'TIM1_CH3'}, {'@Name': 'USART1_RX'}, {'@Name': 'USB_OTG_FS_ID'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA11': {'70': {'I/O': [{'@Name': 'ADC1_EXTI11'}, {'@Name': 'ADC2_EXTI11'}, {'@Name': 'ADC3_EXTI11'}, {'@Name': 'CAN1_RX'}, {'@Name': 'TIM1_CH4'}, {'@Name': 'USART1_CTS'}, {'@Name': 'USB_OTG_FS_DM'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA12': {'71': {'I/O': [{'@Name': 'CAN1_TX'}, {'@Name': 'TIM1_ETR'}, {'@Name': 'USART1_RTS'}, {'@Name': 'USB_OTG_FS_DP'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA13': {'72': {'I/O': [{'@Name': 'SYS_JTMS-SWDIO'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'VCAP_2': {'73': {'Power': {}}}, 'PA14': {'76': {'I/O': [{'@Name': 'SYS_JTCK-SWCLK'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PA15': {'77': {'I/O': [{'@Name': 'ADC1_EXTI15'}, {'@Name': 'ADC2_EXTI15'}, {'@Name': 'ADC3_EXTI15'}, {'@Name': 'I2S3_WS'}, {'@Name': 'SPI1_NSS'}, {'@Name': 'SPI3_NSS'}, {'@Name': 'SYS_JTDI'}, {'@Name': 'TIM2_CH1'}, {'@Name': 'TIM2_ETR'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC10': {'78': {'I/O': [{'@Name': 'DCMI_D8'}, {'@Name': 'I2S3_CK'}, {'@Name': 'SDIO_D2'}, {'@Name': 'SPI3_SCK'}, {'@Name': 'UART4_TX'}, {'@Name': 'USART3_TX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC11': {'79': {'I/O': [{'@Name': 'ADC1_EXTI11'}, {'@Name': 'ADC2_EXTI11'}, {'@Name': 'ADC3_EXTI11'}, {'@Name': 'DCMI_D4'}, {'@Name': 'I2S3_ext_SD'}, {'@Name': 'SDIO_D3'}, {'@Name': 'SPI3_MISO'}, {'@Name': 'UART4_RX'}, {'@Name': 'USART3_RX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PC12': {'80': {'I/O': [{'@Name': 'DCMI_D9'}, {'@Name': 'I2S3_SD'}, {'@Name': 'SDIO_CK'}, {'@Name': 'SPI3_MOSI'}, {'@Name': 'UART5_TX'}, {'@Name': 'USART3_CK'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD0': {'81': {'I/O': [{'@Name': 'CAN1_RX'}, {'@Name': 'FSMC_D2'}, {'@Name': 'FSMC_DA2'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD1': {'82': {'I/O': [{'@Name': 'CAN1_TX'}, {'@Name': 'FSMC_D3'}, {'@Name': 'FSMC_DA3'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD2': {'83': {'I/O': [{'@Name': 'DCMI_D11'}, {'@Name': 'SDIO_CMD'}, {'@Name': 'TIM3_ETR'}, {'@Name': 'UART5_RX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD3': {'84': {'I/O': [{'@Name': 'FSMC_CLK'}, {'@Name': 'USART2_CTS'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD4': {'85': {'I/O': [{'@Name': 'FSMC_NOE'}, {'@Name': 'USART2_RTS'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD5': {'86': {'I/O': [{'@Name': 'FSMC_NWE'}, {'@Name': 'USART2_TX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD6': {'87': {'I/O': [{'@Name': 'FSMC_NWAIT'}, {'@Name': 'USART2_RX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PD7': {'88': {'I/O': [{'@Name': 'FSMC_NCE2'}, {'@Name': 'FSMC_NE1'}, {'@Name': 'USART2_CK'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB3': {'89': {'I/O': [{'@Name': 'I2S3_CK'}, {'@Name': 'SPI1_SCK'}, {'@Name': 'SPI3_SCK'}, {'@Name': 'SYS_JTDO-SWO'}, {'@Name': 'TIM2_CH2'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB4': {'90': {'I/O': [{'@Name': 'I2S3_ext_SD'}, {'@Name': 'SPI1_MISO'}, {'@Name': 'SPI3_MISO'}, {'@Name': 'SYS_JTRST'}, {'@Name': 'TIM3_CH1'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB5': {'91': {'I/O': [{'@Name': 'CAN2_RX'}, {'@Name': 'DCMI_D10'}, {'@Name': 'ETH_PPS_OUT'}, {'@Name': 'I2C1_SMBA'}, {'@Name': 'I2S3_SD'}, {'@Name': 'SPI1_MOSI'}, {'@Name': 'SPI3_MOSI'}, {'@Name': 'TIM3_CH2'}, {'@Name': 'USB_OTG_HS_ULPI_D7'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB6': {'92': {'I/O': [{'@Name': 'CAN2_TX'}, {'@Name': 'DCMI_D5'}, {'@Name': 'I2C1_SCL'}, {'@Name': 'TIM4_CH1'}, {'@Name': 'USART1_TX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB7': {'93': {'I/O': [{'@Name': 'DCMI_VSYNC'}, {'@Name': 'FSMC_NL'}, {'@Name': 'I2C1_SDA'}, {'@Name': 'TIM4_CH2'}, {'@Name': 'USART1_RX'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'BOOT0': {'94': {'Boot': {}}}, 'PB8': {'95': {'I/O': [{'@Name': 'CAN1_RX'}, {'@Name': 'DCMI_D6'}, {'@Name': 'ETH_TXD3'}, {'@Name': 'I2C1_SCL'}, {'@Name': 'SDIO_D4'}, {'@Name': 'TIM10_CH1'}, {'@Name': 'TIM4_CH3'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PB9': {'96': {'I/O': [{'@Name': 'CAN1_TX'}, {'@Name': 'DAC_EXTI9'}, {'@Name': 'DCMI_D7'}, {'@Name': 'I2C1_SDA'}, {'@Name': 'I2S2_WS'}, {'@Name': 'SDIO_D5'}, {'@Name': 'SPI2_NSS'}, {'@Name': 'TIM11_CH1'}, {'@Name': 'TIM4_CH4'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE0': {'97': {'I/O': [{'@Name': 'DCMI_D2'}, {'@Name': 'FSMC_NBL0'}, {'@Name': 'TIM4_ETR'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}, 'PE1': {'98': {'I/O': [{'@Name': 'DCMI_D3'}, {'@Name': 'FSMC_NBL1'}, {'@IOModes': 'Input,Output,Analog,EVENTOUT,EXTI', '@Name': 'GPIO'}]}}}}}
#print(data_format)
dataform = data_format['STM32F407VGTx']['LQFP100']
#Input pin requirement data 
input_pin ={'USART':2,'UART':3,'ADC':4,'GPIO':13,'SPI':2,'I2C':2} # Mapping the input pin in the MCU
# ... (previous code remains unchanged)

selected = {} # Mapping the selected communication pin in the MCU
construct_selected = {} 

for ir in dataform: 
    pin_pos = list(dataform[ir])[0] # Get the pin name data 
    pin_type = list(dataform[ir][pin_pos])[0] #Get the pin position data 
    print(ir,pin_pos,pin_type) 
    if dataform[ir][pin_pos][pin_type] != {}:
        loading_signal = dataform[ir][pin_pos][pin_type]
        for ldp in loading_signal:
            try:
                print("signal pin", ldp['@Name']) 
                # Check if the signal name matches any of the desired modes
                for mode in ['UART', 'ADC', 'GPIO', 'USART', 'SPI','I2C']:
                    if mode in ldp['@Name']:
                        if mode not in selected:
                            selected[mode] = []
                        selected[mode].append({
                            'pin': ir,
                            'position': pin_pos,
                            'type': pin_type,
                            'signal': ldp['@Name']
                        })
                        print(f"Selected {mode} pin: {ir}")
                        break  # Stop checking other modes once a match is found
            except:
                pass 

# Print the selected pins
print("\nSelected pins in JSON format:")
print(json.dumps(selected, indent=2))

# Print a summary of selected pins
print("\nSummary of selected pins:")
for mode, pins in selected.items():
    print(f"{mode}: {len(pins)} pins")
    for pin in pins:
        print(f"  - Pin {pin['pin']}: {pin['signal']}")

for lisp in list(selected):
    pin_internal = selected[lisp]
    print(lisp)
    for itn in pin_internal:
        if lisp == 'GPIO':
            if lisp not in construct_selected:
                construct_selected[lisp] = {}
            print("Pin_select: ", itn['pin'], itn['position'], itn['type'], itn['signal'])
            if itn['pin']+"_"+itn['signal'] not in construct_selected[lisp]:
                construct_selected[lisp][itn['pin']+"_"+itn['signal']] = {itn['pin']:{itn['position']:{itn['type']:itn['signal']}}}
        
        elif lisp == 'ADC':
            if lisp not in construct_selected:
                construct_selected[lisp] = {}
            print("ADC analog input signal")
            print("Pin_select: ", itn['pin'], itn['position'], itn['type'], itn['signal'])
            if itn['signal'].split("_")[0] not in construct_selected[lisp]:
                construct_selected[lisp][itn['signal'].split("_")[1]+"_"+itn['signal'].split("_")[1]] = {itn['pin']:{itn['position']:{itn['type']:itn['signal']}}}
        
        elif lisp in ['UART', 'USART']:
            if lisp not in construct_selected:
                construct_selected[lisp] = {}
            print(f"{lisp} communication port")
            print("Pin_select: ", itn['pin'], itn['position'], itn['type'], itn['signal'])
            interface_num = itn['signal'].split("_")[0]
            if interface_num not in construct_selected[lisp]:
                construct_selected[lisp][interface_num] = {}
            construct_selected[lisp][interface_num][itn['signal']] = {itn['pin']:{itn['position']:{itn['type']:itn['signal']}}}
        
        elif lisp == 'SPI':
            if lisp not in construct_selected:
                construct_selected[lisp] = {}
            print("SPI communication port")
            print("Pin_select: ", itn['pin'], itn['position'], itn['type'], itn['signal'])
            interface_num = itn['signal'].split("_")[0]
            if interface_num not in construct_selected[lisp]:
                construct_selected[lisp][interface_num] = {}
            construct_selected[lisp][interface_num][itn['signal']] = {itn['pin']:{itn['position']:{itn['type']:itn['signal']}}}
        elif lisp == 'I2C':
            if lisp not in construct_selected:
                construct_selected[lisp] = {}
            print(f"{lisp} communication port")
            print("Pin_select: ", itn['pin'], itn['position'], itn['type'], itn['signal'])
            interface_num = itn['signal'].split("_")[0]
            if interface_num not in construct_selected[lisp]:
                construct_selected[lisp][interface_num] = {}
            construct_selected[lisp][interface_num][itn['signal']] = {itn['pin']:{itn['position']:{itn['type']:itn['signal']}}} 
print(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>")
print(list(construct_selected))
for rte in list(construct_selected):
    print(rte, construct_selected[rte])
